<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />


<meta name="date" content="2023-03-28" />

<title>Using ‘outForest’</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">

div.csl-bib-body { }
div.csl-entry {
clear: both;
}
.hanging div.csl-entry {
margin-left:2em;
text-indent:-2em;
}
div.csl-left-margin {
min-width:2em;
float:left;
}
div.csl-right-inline {
margin-left:2em;
padding-left:1em;
}
div.csl-indent {
margin-left: 2em;
}
</style>

<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Using ‘outForest’</h1>
<h4 class="date">2023-03-28</h4>



<div id="overview" class="section level2">
<h2>Overview</h2>
<p>{outForest} is a random forest-based implementation of the method
described in Chapter 7.1.2 (“Regression model based anomaly detection”)
of <span class="citation">(<a href="#ref-Chandola2009" role="doc-biblioref">Chandola, Banerjee, and Kumar 2009</a>)</span>.
Each numeric variable is regressed onto all other variables using a
random forest. If the scaled absolute difference between observed value
and out-of-bag prediction is suspiciouly large (e.g. more than three
times the RMSE of the out-of-bag predictions), then a value is
considered an outlier. After identification of outliers, they can be
replaced e.g. by predictive mean matching from the non-outliers.</p>
<p>The method can be viewed as a multivariate extension of a basic
univariate outlier detection method, in which a value is considered an
outlier if it deviates from the mean by more than, say, three times the
standard deviation. In the multivariate case, instead of comparing a
value with the <em>overall mean</em>, rather the difference to the
<em>conditional mean</em> is considered. {outForest} estimates this
conditional mean by a random forest.</p>
<p>Specificly, the outlier score of the <span class="math inline">\(i\)</span>-th observed value <span class="math inline">\(x_{ij}\)</span> of variable <span class="math inline">\(j\)</span> is defined as <span class="math display">\[
  s_{ij} = \frac{x_{ij} - \text{pred}_{ij}}{\text{rmse}_j},
\]</span> where <span class="math inline">\(\text{pred}_{ij}\)</span> is
is the corresponding out-of-bag prediction of the <span class="math inline">\(j\)</span>th random forest with RMSE <span class="math inline">\(\text{rmse}_j\)</span>. If <span class="math inline">\(|s_{ij}| &gt; L\)</span> with threshold <span class="math inline">\(L\)</span>, then <span class="math inline">\(x_{ij}\)</span> is considered an outlier.</p>
<p>Why using random forests for calculating the conditional means? They
often work well without parameter tuning, outliers in the input
variables are no issue and the out-of-bag mechanism helps to provide
fair outlier scores.</p>
<p>{outForest} utilizes the high-performance random forest
implementation {ranger} <span class="citation">(<a href="#ref-wright2017" role="doc-biblioref">Wright and Ziegler
2017</a>)</span>. Since it does not allow for missing values, any
missing value is first being imputed by chained random forests
implemented in {missRanger}.</p>
<p>In the examples below, we will meet different functions from the
{outForest} package:</p>
<ul>
<li><p><code>outForest()</code>: This is the main function. It
identifies and replaces outliers in numeric variables of a data
frame.</p></li>
<li><p><code>print()</code>, <code>summary()</code> and
<code>plot()</code>: To inspect outlier information.</p></li>
<li><p><code>outliers()</code> and <code>Data()</code>: To extract
information on outliers and the data with replaced outliers.</p></li>
<li><p><code>generateOutliers()</code>: To add nasty outliers to a data
set.</p></li>
<li><p><code>predict()</code>: To apply a fitted “outForest” object to
fresh data.</p></li>
</ul>
</div>
<div id="installation" class="section level2">
<h2>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># From CRAN</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;outForest&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Development version</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;mayer79/outForest&quot;</span>)</span></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2>Usage</h2>
<p>We first generate a data set with two multivariate outliers. Then, we
use <code>outForest()</code> to find them.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(outForest)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data with multivariate outlier</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">3</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, pi, <span class="at">by =</span> <span class="fl">0.01</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">cos</span>(t), <span class="at">y =</span> <span class="fu">sin</span>(t) <span class="sc">+</span> <span class="fu">runif</span>(<span class="fu">length</span>(t), <span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">0.1</span>))</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>dat[<span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">200</span>), ] <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">0.5</span>), <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.4</span>))</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(y <span class="sc">~</span> x, <span class="at">data =</span> dat)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s run outForest on that data</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>ch <span class="ot">&lt;-</span> <span class="fu">outForest</span>(dat)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; Outlier identification by random forests
#&gt; 
#&gt;   Variables to check:        x, y
#&gt;   Variables used to check:   x, y
#&gt; 
#&gt;   Checking: x  y

# What outliers did we find?
outliers(ch)
#&gt;   row col observed predicted       rmse     score threshold replacement
#&gt; 1 100   y      0.4 0.8567112 0.07485516 -6.101265         3   0.9913182
#&gt; 2 200   y      0.4 0.8244413 0.07485516 -5.670168         3   0.8113720

# Bingo! How does the fixed data set looks like?
plot(y ~ x, data = Data(ch))</code></pre>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The number of outliers per variable</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ch)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Note that <code>outForest()</code> offers a <code>...</code> argument
to pass options to its workhorse random forest implementation
<code>ranger()</code>, e.g. <code>num.trees</code> or <code>mtry</code>.
How would we use its “extra trees” variant with 50 trees? As data set,
we add a couple of outliers to the famous iris flower data set.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(irisWithOutliers <span class="ot">&lt;-</span> <span class="fu">generateOutliers</span>(iris, <span class="at">p =</span> <span class="fl">0.02</span>))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          5.1         3.5      1.40000         0.2  setosa</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          4.9         3.0    -13.32449         0.2  setosa</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          4.7         3.2      1.30000         0.2  setosa</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          4.6         3.1      1.50000         0.2  setosa</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          5.0         3.6      1.40000         0.2  setosa</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          5.4         3.9      1.70000         0.4  setosa</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">outForest</span>(</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  irisWithOutliers, <span class="at">splitrule =</span> <span class="st">&quot;extratrees&quot;</span>, <span class="at">num.trees =</span> <span class="dv">50</span>, <span class="at">verbose =</span> <span class="dv">0</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># The worst outliers</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">outliers</span>(out))</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   row          col   observed predicted      rmse     score threshold</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  77  Petal.Width   8.617485  1.462865 0.6365155 11.240290         3</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   2 Petal.Length -13.324488  1.572715 1.5200990 -9.800153         3</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 135  Sepal.Width  -5.061389  3.120949 0.9375457 -8.727402         3</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  66 Sepal.Length  16.880345  6.070454 1.4580339  7.414019         3</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 127 Sepal.Length  -4.004644  6.355322 1.4580339 -7.105436         3</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 136 Petal.Length  -4.054545  5.790103 1.5200990 -6.476321         3</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   replacement</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9         1.5</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7         1.3</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         3.0</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         6.1</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         7.3</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8         6.7</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of outliers</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(out)</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following outlier counts have been detected:</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              Number of outliers</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Sepal.Length                  3</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Sepal.Width                   3</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Petal.Length                  2</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Petal.Width                   1</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; These are the worst outliers:</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   row          col   observed predicted      rmse     score threshold</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  77  Petal.Width   8.617485  1.462865 0.6365155 11.240290         3</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   2 Petal.Length -13.324488  1.572715 1.5200990 -9.800153         3</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 135  Sepal.Width  -5.061389  3.120949 0.9375457 -8.727402         3</span></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  66 Sepal.Length  16.880345  6.070454 1.4580339  7.414019         3</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 127 Sepal.Length  -4.004644  6.355322 1.4580339 -7.105436         3</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 136 Petal.Length  -4.054545  5.790103 1.5200990 -6.476321         3</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   replacement</span></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9         1.5</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7         1.3</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         3.0</span></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         6.1</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         7.3</span></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8         6.7</span></span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic plot of the number of outliers per variable</span></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(out)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAGACAMAAAByRC0tAAABJlBMVEUAAAAAACsAADoAAEwAAGYAK0wAK2sAOjoAOmYAOpAATGsATIcAZmYAZpAAZrYrAAArACsrKysra6M6AAA6ADo6AGY6OgA6Ojo6OmY6ZpA6ZrY6kLY6kNtMAABMACtMKwBMTExMa2tMh4dMh75mAABmOgBmOjpmZgBmkLZmkNtmtrZmtttmtv9rKwBra0xrh2tro76HTACHh0yHo2uHvr6QOgCQZgCQZjqQkDqQkGaQkLaQtpCQttuQtv+Q27aQ2/+jayujvoejvqOjvr62ZgC2Zjq2ZpC2kGa225C227a229u22/+2/9u2//++h0y+o2u+voe+vqO+vr7bkDrbkGbbtmbbtpDb27bb29vb/9vb////tmb/trb/25D/27b//7b//9v///+chGQQAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAP8ElEQVR4nO2dC3sTxxlGF0NcErfgmJYmqZ2kseklgQalpekdJ5i2CUEGKZcW1WD9/z/RuexlVhrJkt+Vdlac8zxY1mj87WjmaGZ2leyXjQEEsrYbAN0GgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUACgUCiGwKdZNld8/DqKLtxYc1rT5eJfP74Vpa9d0Gdfz4dnz/I3nzhfiwT/dJMHSl4X+trxSJ0RiDbZysQaJQZ9udWeXnnGgLNpDMC2SloBQINs62Hi4Rse9QQSMIKZDrQC+T70vy+7wq+v51tfTL+9lZ2/aGree2rX2XZu0/sn50/zrKt92xnG0/+eie79iSP972p8qPfvPCBK4XK4vAYrsq1b4IZKBL229um6N0nVXtdK67PaUVuxMh9Mr6/Y47xzsOqytf+SFV58L6mWtEq3REo92VSIM/tzCvma+a/569ef2rHxVJ8cP0z+7QmUFU8V6BI2GF10Kq9eeQZrfDmmJrm6aiqnVf574OJ8uB9TbWiVboi0LVfm76LCrQ//s505Ce26/f9bumJLfEVn4zPbtnioSv+j49miswI+PrBEhYWB8cIljA/dNNhbbte2IPul+21dea2wsS6kR/B/PqTF/UqxeHK8uB9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" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic plot of the scores of the outliers per variable</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(out, <span class="at">what =</span> <span class="st">&quot;scores&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The fixed data</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">Data</span>(out))</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          4.9         3.0          1.3         0.2  setosa</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          4.7         3.2          1.3         0.2  setosa</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          5.0         3.6          1.4         0.2  setosa</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          5.4         3.9          1.7         0.4  setosa</span></span></code></pre></div>
</div>
<div id="pipe" class="section level2">
<h2>Pipe</h2>
<p><code>outForest()</code> can be combined with the pipe:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>irisWithOutliers <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">outForest</span>(<span class="at">verbose =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Data</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
</div>
<div id="out-of-sample-application" class="section level2">
<h2>Out-of-sample application</h2>
<p>Once an “outForest” object is fitted with option
<code>allow_predictions = TRUE</code>, it can be used to find and
replace outliers in new data without refitting. Note that random forests
can be huge, so use this option with care. Further note that currently,
missing values in the new data are only allowed in one single variable
to be checked.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">outForest</span>(iris, <span class="at">allow_predictions =</span> <span class="cn">TRUE</span>, <span class="at">verbose =</span> <span class="dv">0</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>iris1 <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ]</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>iris1<span class="sc">$</span>Sepal.Length[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(out, <span class="at">newdata =</span> iris1)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">outliers</span>(pred)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   row          col observed predicted     rmse     score threshold replacement</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   1 Sepal.Length       -1  5.011421 0.369207 -16.28198         3         5.2</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="fu">Data</span>(pred)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          5.2         3.5          1.4         0.2  setosa</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          4.9         3.0          1.4         0.2  setosa</span></span></code></pre></div>
</div>
<div id="the-formula-interface" class="section level2">
<h2>The formula interface</h2>
<p>By default, <code>outForest()</code> uses all columns in the data set
to check all numeric columns with missings. To override this behaviour,
you can use its formula interface: The left hand side specifies the
variables to be checked (variable names separated by a <code>+</code>),
while the right hand side lists the variables used for checking.</p>
<p>So if you e.g. want to check only variable <code>Sepal.Length</code>
based on <code>Species</code>, then use this syntax.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">outForest</span>(irisWithOutliers, Sepal.Length <span class="sc">~</span> Species, <span class="at">verbose =</span> <span class="dv">0</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(out)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following outlier counts have been detected:</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              Number of outliers</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Sepal.Length                  3</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; These are the worst outliers:</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   row          col  observed predicted     rmse     score threshold replacement</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  66 Sepal.Length 16.880345  5.928826 1.490069  7.349674         3         5.9</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 127 Sepal.Length -4.004644  6.752837 1.490069 -7.219453         3         6.4</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 135 Sepal.Length 13.663652  6.381728 1.490069  4.886972         3         7.4</span></span></code></pre></div>
<p>If you want to prevent <code>outForest()</code> to identify and
replace outliers in the response variable of a subsequent model,
<code>Sepal.Length</code> say, subtract that variable from the left hand
side.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">outForest</span>(irisWithOutliers, . <span class="sc">-</span> Sepal.Length <span class="sc">~</span> ., <span class="at">verbose =</span> <span class="dv">0</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(out)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following outlier counts have been detected:</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              Number of outliers</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Sepal.Width                   4</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Petal.Length                  2</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Petal.Width                   1</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; These are the worst outliers:</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   row          col   observed  predicted      rmse     score threshold</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  77  Petal.Width   8.617485  1.5489019 0.6485071 10.899777         3</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   2 Petal.Length -13.324488  1.4629804 1.5531209 -9.521131         3</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 135  Sepal.Width  -5.061389  3.2467161 0.9712182 -8.554314         3</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 136 Petal.Length  -4.054545  6.0022195 1.5531209 -6.475198         3</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 117  Sepal.Width   8.720982  2.9949163 0.9712182  5.895756         3</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  66  Sepal.Width   3.100000 -0.8153869 0.9712182  4.031418         3</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   replacement</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7         1.5</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         1.4</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         2.8</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         5.9</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         2.9</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         2.4</span></span></code></pre></div>
</div>
<div id="too-many-values-are-identified-as-outliers.-crap" class="section level2">
<h2>Too many values are identified as outliers. Crap!</h2>
<p>For large data sets, just by chance, many values can surpass the
default threshold of 3. To reduce the number of outliers, the threshold
can be increased. Alternatively, the number of outliers can be limited
by the two arguments <code>max_n_outliers</code> and
<code>max_prop_outliers</code>. E.g. if at most three outliers are to be
identified, set <code>max_n_outliers = 3</code>. If at most 1% of the
values are to be declared as outliers, set
<code>max_prop_outliers = 0.01</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">outliers</span>(<span class="fu">outForest</span>(irisWithOutliers, <span class="at">max_n_outliers =</span> <span class="dv">3</span>, <span class="at">verbose =</span> <span class="dv">0</span>))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   row          col   observed predicted      rmse     score threshold</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  77  Petal.Width   8.617485  1.575285 0.6447998 10.921528  7.501523</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   2 Petal.Length -13.324488  1.451632 1.5567481 -9.491657  7.501523</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 135  Sepal.Width  -5.061389  3.219084 0.9663933 -8.568430  7.501523</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   replacement</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         1.5</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         1.4</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         3.1</span></span></code></pre></div>
</div>
<div id="i-dont-want-outliers-to-be-replaced" class="section level2">
<h2>I don’t want outliers to be replaced!</h2>
<p>By default <code>outForest()</code> replaces outliers by predictive
mean matching on the out-of-bag predictions. Alternatively, you can set
the <code>replace</code> argument to a different value:</p>
<ul>
<li><p><code>&quot;no&quot;</code>: Outliers are not replaced.</p></li>
<li><p><code>&quot;predicted&quot;</code>: Outliers are replaced by the out-of-bag
predictions (without predictive mean matching).</p></li>
<li><p><code>&quot;NA&quot;</code>: Outliers are replaced by missing
values.</p></li>
</ul>
<p>So if you would like to replace outliers by NAs, write:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">outForest</span>(irisWithOutliers, <span class="at">replace =</span> <span class="st">&quot;NA&quot;</span>, <span class="at">verbose =</span> <span class="dv">0</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">Data</span>(out))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          4.9         3.0           NA         0.2  setosa</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          4.7         3.2          1.3         0.2  setosa</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          5.0         3.6          1.4         0.2  setosa</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          5.4         3.9          1.7         0.4  setosa</span></span></code></pre></div>
</div>
<div id="the-algorithm-takes-too-much-time.-what-can-i-do" class="section level2">
<h2>The algorithm takes too much time. What can I do?</h2>
<p><code>outForest()</code> is based on fitting one random forest for
each numeric variable. Since the underlying random forest implementation
<code>ranger()</code> uses 500 trees per default, a huge number of trees
might be calculated. For larger data sets, the overall process can take
very long.</p>
<p>Here are tweaks to make things faster:</p>
<ul>
<li><p>Use less trees, e.g. by setting <code>num.trees = 50</code>.
Don’t use a too low value because this can lead to missing out-of-bag
predictions.</p></li>
<li><p>Use smaller number of variables to be considered in a split,
e.g. <code>mtry = 2</code>.</p></li>
<li><p>Use smaller bootstrap samples by setting
e.g. <code>sample.fraction = 0.1</code>.</p></li>
<li><p>Use a low tree depth <code>max.depth = 6</code>.</p></li>
<li><p>Use large leafs,
e.g. <code>min.node.size = 10000</code>.</p></li>
</ul>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="unnumbered">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Chandola2009" class="csl-entry">
Chandola, Varun, Arindam Banerjee, and Vipin Kumar. 2009. <span>“Anomaly
Detection: A Survey.”</span> <em>ACM Comput. Surv.</em> 41 (3): 15:1–58.
<a href="https://doi.org/10.1145/1541880.1541882">https://doi.org/10.1145/1541880.1541882</a>.
</div>
<div id="ref-wright2017" class="csl-entry">
Wright, Marvin, and Andreas Ziegler. 2017. <span>“Ranger: A Fast
Implementation of Random Forests for High Dimensional Data in c++ and
r.”</span> <em>Journal of Statistical Software, Articles</em> 77 (1):
1–17. <a href="https://doi.org/10.18637/jss.v077.i01">https://doi.org/10.18637/jss.v077.i01</a>.
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
